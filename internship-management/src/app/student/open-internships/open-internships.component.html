<div class="min-h-screen flex items-start justify-center p-8 overflow-auto">
  <div class="w-full max-w-6xl bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
    <h2 class="text-2xl font-bold mb-6 text-center text-gray-800 dark:text-white">Open Internship Offers</h2>

    <div *ngIf="isLoading" class="text-center text-gray-500 dark:text-gray-300 my-8 text-lg">
      Loading...
    </div>

    <table *ngIf="!isLoading" class="w-full table-auto rounded-lg shadow-md overflow-hidden">
      <thead>
      <tr class="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white">
        <th class="px-4 py-3 text-left">Company</th>
        <th class="px-4 py-3 text-left">Position</th>
        <th class="px-4 py-3 text-left">Department</th>
        <th class="px-4 py-3 text-left">Start</th>
        <th class="px-4 py-3 text-left">End</th>
        <th class="px-4 py-3 text-left">Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let offer of internshipOffers"
          class="bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700">
        <td class="px-4 py-3 text-gray-800 dark:text-gray-200 break-words">{{ offer.companyBranchName }}</td>
        <td class="px-4 py-3 text-gray-800 dark:text-gray-200 break-words">{{ offer.position }}</td>
        <td class="px-4 py-3 text-gray-800 dark:text-gray-200 break-words">{{ offer.department }}</td>
        <td class="px-4 py-3 text-gray-800 dark:text-gray-200">{{ offer.startDate }}</td>
        <td class="px-4 py-3 text-gray-800 dark:text-gray-200">{{ offer.endDate }}</td>
        <td class="px-4 py-3 space-x-2">
          <button class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" (click)="openDetails(offer)">
            Details
          </button>
          <button
            class="px-3 py-1 rounded text-white font-semibold"
            [ngClass]="isOfferApplied(offer.offerId) ? 'bg-green-600' : 'bg-red-600 hover:bg-red-700'"
            (click)="applyToOffer(offer.offerId)"
            [disabled]="isOfferApplied(offer.offerId)">
            {{ isOfferApplied(offer.offerId) ? 'Applied' : 'Apply' }}
          </button>
        </td>
      </tr>
      </tbody>
    </table>

    <!-- âœ… Modal -->
    <div *ngIf="selectedOffer" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-lg">
        <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-white">Internship Details</h3>
        <div class="text-gray-700 dark:text-gray-300 space-y-4">
          <div *ngIf="selectedOffer.description"><strong>Title:</strong> {{ selectedOffer.description }}</div>
          <div *ngIf="selectedOffer.details"><strong>Details:</strong> {{ selectedOffer.details }}</div>
        </div>
        <div class="mt-6 text-right space-x-2">
          <button class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500" (click)="closeDetails()">Close</button>

          <button *ngIf="!isOfferApplied(selectedOffer.offerId)"
                  class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"
                  (click)="applyToOffer(selectedOffer.offerId)">
            Apply
          </button>

          <span *ngIf="isOfferApplied(selectedOffer.offerId)"
                class="text-green-500 font-semibold px-4 py-2">
            Already Applied
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
